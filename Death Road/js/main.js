import GameView from"./view/game_view.js";import Game from"./model/game.js";import GameControls from"./controller/game_controls.js";class MainEvents{constructor(a){this.main=a;const b=document.querySelector(".menu__button--start"),c=document.querySelector(".menu__button--rules"),d=document.querySelector(".menu__button--high-score"),e=document.querySelector(".menu__button--settings");b.addEventListener("click",this.main.startGame.bind(this.main)),c.addEventListener("click",this.main.showRules.bind(this.main)),d.addEventListener("click",this.main.showHighScore.bind(this.main)),e.addEventListener("click",this.main.showSettings.bind(this.main));const f=document.querySelector(".rules__button--back"),g=document.querySelector(".high-score__button--back"),h=document.querySelector(".settings__button--back"),i=document.querySelector(".settings__button--music"),j=document.querySelector(".result__button--back"),k=document.querySelector(".result__button--again");f.addEventListener("click",this.main.hideRules.bind(this.main)),g.addEventListener("click",this.main.hideHighScore.bind(this.main)),h.addEventListener("click",this.main.hideSettings.bind(this.main)),j.addEventListener("click",this.main.hideResult.bind(this.main)),k.addEventListener("click",this.main.startGame.bind(this.main)),document.addEventListener("keydown",this.main.keydownHandler.bind(this.main))}}class Main{constructor(){console.log(this);const a=document.querySelector(".game__canvas");this._canvasWidth=600,this._canvasHeight=600,a.setAttribute("width",this._canvasWidth),a.setAttribute("height",this._canvasWidth),this._view,this._model,this._controller,this._menu=document.querySelector(".menu"),this._gameSection=document.querySelector(".game"),this._rules=document.querySelector(".rules"),this._highScore=document.querySelector(".high-score"),this._settings=document.querySelector(".settings"),this._result=document.querySelector(".result")}keydownHandler(a){a.keyCode===27&&(a.preventDefault(),!this._gameSection.classList.contains("section--closed")&&this.endGame(),!this._rules.classList.contains("section--closed")&&this.hideRules(),!this._highScore.classList.contains("section--closed")&&this.hideHighScore(),!this._settings.classList.contains("section--closed")&&this.hideSettings(),this.showMenu())}startGame(){this.showGame(),this._result.classList.contains("section--closed")||this.hideResult(),this._menu.classList.contains("section--closed")||this.hideMenu(),this._view=new GameView(this._canvasWidth,this._canvasHeight),this._model=new Game(this,this._view,this._canvasWidth,this._canvasHeight),this._controller=new GameControls(this._model)}endGame(){this.hideGame(),this._view=null,this._model=null,this._controller=null}showGame(){this._gameSection.classList.remove("section--closed")}hideGame(){this._gameSection.classList.add("section--closed")}showMenu(){this._menu.classList.remove("section--closed")}hideMenu(){this._menu.classList.add("section--closed")}showRules(){this._rules.classList.remove("section--closed"),this.hideMenu()}hideRules(){this._rules.classList.add("section--closed"),this.showMenu()}showHighScore(){this._highScore.classList.remove("section--closed"),this.hideMenu()}hideHighScore(){this._highScore.classList.add("section--closed"),this.showMenu()}showSettings(){this._settings.classList.remove("section--closed"),this.hideMenu()}hideSettings(){this._settings.classList.add("section--closed"),this.showMenu()}showResult(a){const b=document.querySelector(".result__text");b.textContent=a,this._result.classList.remove("section--closed"),this.endGame()}hideResult(){this._result.classList.add("section--closed"),this.showMenu()}}const main=new Main,mainEvents=new MainEvents(main);